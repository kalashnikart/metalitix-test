!function(t,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports["analytics-logger"]=o():t["analytics-logger"]=o()}(self,(function(){return(()=>{"use strict";var t={};(t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})})(t);const o={schema:{interval:{default:1e3},appkey:{default:"test-appkey-1234-qwertyuiop"}},init(){console.log("metalitix-logger running"),this.poll=this.poll.bind(this),this.startPolling=this.startPolling.bind(this),this.stopPolling=this.stopPolling.bind(this),this.nextPoll=void 0,this.worldPosition=new window.THREE.Vector3,this.worldQuaternion=new window.THREE.Quaternion,window.aircards__analytics_logger__permission_granted=this.startPolling,window.aircards__analytics_logger__permission_denied=this.stopPolling},play(){this.startPolling()},remove(){this.stopPolling()},startPolling(){const{interval:t}=this.data;this.nextPoll=setTimeout(this.poll,t)},stopPolling(){clearTimeout(this.nextPoll)},poll(){const{el:{object3D:t},data:{interval:o,appkey:i},worldPosition:e}=this,{rotation:{x:l,y:n,z:s}}=t;t.getWorldPosition(e);const a=window.THREE.MathUtils.radToDeg(l),r=window.THREE.MathUtils.radToDeg(n),d=window.THREE.MathUtils.radToDeg(s),{x:p,y:g,z:h}=e,c={appkey:i,timestamp:Date.now(),position:{x:p,y:g,z:h},rotation:{x:a,y:r,z:d}};console.log("poll",c),fetch("https://metalitix-dev.aircards.io/api/v1/xr-analytics",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),this.nextPoll=setTimeout(this.poll,o)}};return window.AFRAME.registerComponent("metalitix-logger",o),t})()}));